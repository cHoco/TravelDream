<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:jsf="http://xmlns.jcp.org/jsf/passthrough"
                template="/WEB-INF/templates/default.xhtml">

    <f:metadata>
        <f:event type="preRenderView" listener="#{userContentBean.loadPacchettiPersonaliPartecipati()}"/>
    </f:metadata>

    <ui:define name="htmlhead">
        <title>Mio Profilo - TravelDream</title>
    </ui:define>

    <ui:define name="content">

        <header class="container">
            <div class="bg"></div>
            <div class="home-text">
                <h1>Partecipa a un viaggio</h1>
                <p>Sei stato invitato a partecipare a un nuovo viaggio? Inserisci qui affianco il codice!</p>
            </div>

            <div class="home-register profile-form">
                <div class="form-codice">
                    <form action="#{request.contextPath}/mostraPacchetto.xhtml" method="get">
                        <div class="clear-fix">
                            <div class="input-codice">
                                <input type="text" placeholder="Codice" name="codicePacchettoSalvato"/>
                            </div>
                            <div class="submit-codice">
                                <input type="submit" class="submit-button-codice" value="Vai al viaggio"/>
                            </div>
                        </div>
                    </form>
                </div>
            </div>

        </header>


        <section id="pacchetti-personali">
            <div class="container">
                <h2 class="pacchetti-personali-title">Pacchetti Personali</h2>
                <h:dataTable styleClass="flat-table" value="#{userContentBean.pacchettiPersonali}" var="pacchettoPersonale">

                    <h:column>
                        <f:facet name="header">
                            Nome
                        </f:facet>
                        #{userContentBean.getPacchettoOriginale(pacchettoPersonale).nome}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Località
                        </f:facet>
                        #{userContentBean.getPacchettoOriginale(pacchettoPersonale).localita}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Data Partenza
                        </f:facet>
                        #{pacchettoPersonale.dataPartenza}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Data Partenza
                        </f:facet>
                        #{pacchettoPersonale.dataRitorno}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Prenotato
                        </f:facet>
                        #{pacchettoPersonale.prenotato}
                    </h:column>

                    <h:column>
                        <a href="#{request.contextPath}/mostraPacchetto.xhtml?codicePacchettoSalvato=#{pacchettoPersonale.codice_pacchettoSalvato}">Vai</a>
                    </h:column>

                </h:dataTable>
            </div>

        </section>

        <section id="pacchetti-partecipati">
            <div class="container">
                <h2 class="pacchetti-partecipati-title">Pacchetti a cui partecipi</h2>
                <h:dataTable styleClass="flat-table" value="#{userContentBean.pacchettiPartecipati}" var="pacchettoPartecipato">

                    <h:column>
                        <f:facet name="header">
                            Nome
                        </f:facet>
                        #{userContentBean.getPacchettoOriginale(pacchettoPartecipato).nome}
                    </h:column>
                    <h:column>
                        <f:facet name="header">
                            Località
                        </f:facet>
                        #{userContentBean.getPacchettoOriginale(pacchettoPartecipato).localita}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Data Partenza
                        </f:facet>
                        #{pacchettoPartecipato.dataPartenza}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Data Ritorno
                        </f:facet>
                        #{pacchettoPartecipato.dataRitorno}
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            Creato da
                        </f:facet>
                        #{pacchettoPartecipato.emailUserCreatore}
                    </h:column>

                    <h:column>
                        <a href="#{request.contextPath}/mostraPacchetto.xhtml?codicePacchettoSalvato=#{pacchettoPartecipato.codice_pacchettoSalvato}">Vai</a>
                    </h:column>

                </h:dataTable>
            </div>

        </section>



    </ui:define>
</ui:composition>